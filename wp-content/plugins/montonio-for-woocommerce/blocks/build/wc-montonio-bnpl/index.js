(()=>{"use strict";const e=window.React,o=window.wp.element,t=window.wp.i18n,n=window.wp.data,{registerPaymentMethod:i}=wc.wcBlocksRegistry,{getSetting:r}=wc.wcSettings,{decodeEntities:c}=wp.htmlEntities,{applyFilters:a,addFilter:m}=wp.hooks,l=r("wc_montonio_bnpl_data",{}),s=a("wc_montonio_bnpl_block_title",c(l.title||(0,t.__)("Pay Later","montonio-for-woocommerce")),l);m("wc_montonio_bnpl_block_description","montonio-for-woocommerce",((e,o)=>("yes"===o.sandboxMode&&(e="<strong>"+(0,t.__)("TEST MODE ENABLED!","montonio-for-woocommerce")+"</strong><br>"+(0,t.__)("When test mode is enabled, payment providers do not process payments.","montonio-for-woocommerce")+"<br>"+e),e)));const p=a("wc_montonio_bnpl_block_description",c(l.description),l),_=()=>{const i=(0,n.useSelect)((e=>{const o=e("wc/store/cart");return o?o.getCartTotals():{}})),r=(0,t.__)("Pay next month","montonio-for-woocommerce"),c=(0,t.__)("Pay in two parts","montonio-for-woocommerce"),a=(0,t.__)("Pay in three parts","montonio-for-woocommerce"),m=(0,t.__)("Add #amount to the cart to make this option available","montonio-for-woocommerce"),l=(0,t.__)("Cart total exceeds maximum limit for this option","montonio-for-woocommerce"),s=(p=i.total_price,_=i,(parseInt(p)/10**_.currency_minor_unit).toFixed(_.currency_minor_unit).replace(".",_.currency_decimal_separator));var p,_;return(0,o.useEffect)((()=>{"undefined"!=typeof Montonio&&Montonio.Checkout&&Montonio.Checkout.Bnpl&&new Montonio.Checkout.Bnpl({targetId:"montonio-bnpl-widget-container",shouldInjectCSS:!0,hideOptionIfNotAvailable:!1,bnplOptions:[{period:"1",title:r,min:30,max:800},{period:"2",title:c,min:75,max:2500},{period:"3",title:a,min:85,max:2500}],addMoreMessage:m,grandTotal:s,overMaxAmountMessage:l}).init()}),[]),(0,e.createElement)("div",{id:"montonio-bnpl-widget-container"})},d=({eventRegistration:t})=>{const{onPaymentSetup:n}=t;return(0,o.useEffect)((()=>{const e=n((()=>({type:"success",meta:{paymentMethodData:{montonio_bnpl_period:document.querySelector('input[name="montonio_bnpl_period"]')?.value||1}}})));return()=>e()}),[n]),(0,e.createElement)(e.Fragment,null,p&&(0,e.createElement)("p",{className:"montonio-payment-block-description"},(i=p,(0,e.createElement)(o.RawHTML,null,i))),(0,e.createElement)(_,null));var i},w=()=>(0,e.createElement)("span",null,(0,e.createElement)("img",{src:l.iconurl}));i({name:"wc_montonio_bnpl",label:(0,e.createElement)((()=>(0,e.createElement)("span",null,s,(0,e.createElement)(w,null))),null),content:(0,e.createElement)(d,null),edit:(0,e.createElement)(d,null),canMakePayment:()=>a("wc_montonio_bnpl_block_enabled",!0,l),ariaLabel:s})})();